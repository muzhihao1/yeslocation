<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è€¶æ°å°çƒé—¨åº—åœ°å›¾</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
        }
        #map {
            width: 100%;
            height: 100vh;
        }
        .leaflet-popup-content-wrapper {
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .store-popup {
            font-size: 14px;
            line-height: 1.5;
        }
        .store-popup h3 {
            margin: 0 0 8px 0;
            color: #2e7d32;
            font-size: 16px;
        }
        .store-popup p {
            margin: 4px 0;
            color: #666;
        }
        .store-popup .phone {
            color: #1976d2;
            font-weight: bold;
        }
        .custom-marker {
            background-color: #2e7d32;
            border: 3px solid white;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
    </style>
</head>
<body>
    <div id="map"></div>
    
    <script>
        // é—¨åº—æ•°æ®
        const stores = [
            // å‘ˆè´¡åŒº
            { id: 1, name: 'è€¶æ°å°çƒ(å¤§å­¦åŸåº—)', district: 'å‘ˆè´¡åŒº', address: 'äº‘å—çœæ˜†æ˜å¸‚å‘ˆè´¡åŒºå¤§å­¦åŸèšè´¤è¡—768å·', phone: '177-8714-7147', coordinates: [24.8736, 102.8471], businessHours: '09:00-22:00' },
            { id: 2, name: 'è€¶æ°å°çƒ(æ˜¥èè¡—åº—)', district: 'å‘ˆè´¡åŒº', address: 'äº‘å—çœæ˜†æ˜å¸‚å‘ˆè´¡åŒºæ˜¥èè¡—åœ°é“ç«™Då‡ºå£', phone: '177-8714-7147', coordinates: [24.8802, 102.8547], businessHours: '09:00-22:00' },
            { id: 3, name: 'è€¶æ°å°çƒ(é›¨èŠ±åº—)', district: 'å‘ˆè´¡åŒº', address: 'äº‘å—çœæ˜†æ˜å¸‚å‘ˆè´¡åŒºé›¨èŠ±è·¯', phone: '177-8714-7147', coordinates: [24.8695, 102.8392], businessHours: '09:00-22:00' },
            { id: 4, name: 'è€¶æ°å°çƒ(å½©äº‘å—è·¯åº—)', district: 'å‘ˆè´¡åŒº', address: 'äº‘å—çœæ˜†æ˜å¸‚å‘ˆè´¡åŒºå½©äº‘å—è·¯', phone: '177-8714-7147', coordinates: [24.8678, 102.8513], businessHours: '09:00-22:00' },
            { id: 5, name: 'è€¶æ°å°çƒ(å´å®¶è¥åº—)', district: 'å‘ˆè´¡åŒº', address: 'äº‘å—çœæ˜†æ˜å¸‚å‘ˆè´¡åŒºå´å®¶è¥åœ°é“ç«™', phone: '177-8714-7147', coordinates: [24.8745, 102.8601], businessHours: '09:00-22:00' },
            { id: 6, name: 'è€¶æ°å°çƒ(å‘ˆè´¡å¹¿åœºåº—)', district: 'å‘ˆè´¡åŒº', address: 'äº‘å—çœæ˜†æ˜å¸‚å‘ˆè´¡åŒºå‘ˆè´¡å¹¿åœº', phone: '177-8714-7147', coordinates: [24.8721, 102.8456], businessHours: '09:00-22:00' },
            
            // äº”ååŒº
            { id: 7, name: 'è€¶æ°å°çƒ(ç¿ æ¹–åº—)', district: 'äº”ååŒº', address: 'äº‘å—çœæ˜†æ˜å¸‚äº”ååŒºç¿ æ¹–å…¬å›­é™„è¿‘', phone: '177-8714-7147', coordinates: [25.0502, 102.7035], businessHours: '09:00-22:00' },
            { id: 8, name: 'è€¶æ°å°çƒ(å—å±è¡—åº—)', district: 'äº”ååŒº', address: 'äº‘å—çœæ˜†æ˜å¸‚äº”ååŒºå—å±è¡—', phone: '177-8714-7147', coordinates: [25.0421, 102.7108], businessHours: '09:00-23:00' },
            { id: 9, name: 'è€¶æ°å°çƒ(å°è¥¿é—¨åº—)', district: 'äº”ååŒº', address: 'äº‘å—çœæ˜†æ˜å¸‚äº”ååŒºå°è¥¿é—¨', phone: '177-8714-7147', coordinates: [25.0438, 102.6978], businessHours: '09:00-22:00' },
            { id: 10, name: 'è€¶æ°å°çƒ(ä¸€äºŒä¸€å¤§è¡—åº—)', district: 'äº”ååŒº', address: 'äº‘å—çœæ˜†æ˜å¸‚äº”ååŒºä¸€äºŒä¸€å¤§è¡—', phone: '177-8714-7147', coordinates: [25.0589, 102.7021], businessHours: '09:00-22:00' },
            { id: 11, name: 'è€¶æ°å°çƒ(é¾™æ³‰è·¯åº—)', district: 'äº”ååŒº', address: 'äº‘å—çœæ˜†æ˜å¸‚äº”ååŒºé¾™æ³‰è·¯', phone: '177-8714-7147', coordinates: [25.0612, 102.7156], businessHours: '09:00-22:00' },
            { id: 12, name: 'è€¶æ°å°çƒ(ä¸°å®åº—)', district: 'äº”ååŒº', address: 'äº‘å—çœæ˜†æ˜å¸‚äº”ååŒºä¸°å®å°åŒº', phone: '177-8714-7147', coordinates: [25.0567, 102.6892], businessHours: '09:00-22:00' },
            
            // å®˜æ¸¡åŒº
            { id: 13, name: 'è€¶æ°å°çƒ(å…³ä¸Šåº—)', district: 'å®˜æ¸¡åŒº', address: 'äº‘å—çœæ˜†æ˜å¸‚å®˜æ¸¡åŒºå…³ä¸Šä¸­è·¯', phone: '177-8714-7147', coordinates: [25.0187, 102.7389], businessHours: '09:00-22:00' },
            { id: 14, name: 'è€¶æ°å°çƒ(ä¸–çºªåŸåº—)', district: 'å®˜æ¸¡åŒº', address: 'äº‘å—çœæ˜†æ˜å¸‚å®˜æ¸¡åŒºä¸–çºªåŸ', phone: '177-8714-7147', coordinates: [24.9876, 102.7621], businessHours: '09:00-23:00' },
            
            // ç›˜é¾™åŒº
            { id: 15, name: 'è€¶æ°å°çƒ(åŒ—äº¬è·¯åº—)', district: 'ç›˜é¾™åŒº', address: 'äº‘å—çœæ˜†æ˜å¸‚ç›˜é¾™åŒºåŒ—äº¬è·¯', phone: '177-8714-7147', coordinates: [25.0678, 102.7234], businessHours: '09:00-22:00' },
            { id: 16, name: 'è€¶æ°å°çƒ(ç™½å¡”è·¯åº—)', district: 'ç›˜é¾™åŒº', address: 'äº‘å—çœæ˜†æ˜å¸‚ç›˜é¾™åŒºç™½å¡”è·¯', phone: '177-8714-7147', coordinates: [25.0723, 102.7312], businessHours: '09:00-22:00' },
            
            // æ™‹å®åŒº
            { id: 17, name: 'è€¶æ°å°çƒ(æ™‹å®åº—)', district: 'æ™‹å®åŒº', address: 'äº‘å—çœæ˜†æ˜å¸‚æ™‹å®åŒºæ˜†é˜³è¡—é“', phone: '177-8714-7147', coordinates: [24.6697, 102.5952], businessHours: '09:00-22:00' },
            { id: 18, name: 'è€¶æ°å°çƒ(éƒ‘å’Œè·¯åº—)', district: 'æ™‹å®åŒº', address: 'äº‘å—çœæ˜†æ˜å¸‚æ™‹å®åŒºéƒ‘å’Œè·¯', phone: '177-8714-7147', coordinates: [24.6612, 102.5876], businessHours: '09:00-22:00' },
            { id: 19, name: 'è€¶æ°å°çƒ(æ™‹åŸåº—)', district: 'æ™‹å®åŒº', address: 'äº‘å—çœæ˜†æ˜å¸‚æ™‹å®åŒºæ™‹åŸé•‡', phone: '177-8714-7147', coordinates: [24.6789, 102.6023], businessHours: '09:00-22:00' },
            
            // æ¾„æ±Ÿå¸‚
            { id: 20, name: 'è€¶æ°å°çƒ(æ¾„æ±Ÿåº—)', district: 'æ¾„æ±Ÿå¸‚', address: 'äº‘å—çœç‰æºªå¸‚æ¾„æ±Ÿå¸‚å‡¤éº“è¡—é“', phone: '177-8714-7147', coordinates: [24.6756, 102.9084], businessHours: '09:00-22:00' }
        ];

        // åˆå§‹åŒ–åœ°å›¾
        const map = L.map('map').setView([25.0329, 102.7055], 11);

        // æ·»åŠ åœ°å›¾ç“¦ç‰‡å±‚
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
            maxZoom: 19
        }).addTo(map);

        // è‡ªå®šä¹‰å›¾æ ‡
        const greenIcon = L.divIcon({
            className: 'custom-marker',
            html: '<div style="background-color: #2e7d32; width: 100%; height: 100%; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 14px;">ğŸ±</div>',
            iconSize: [30, 30],
            iconAnchor: [15, 15],
            popupAnchor: [0, -15]
        });

        // æ·»åŠ æ ‡è®°
        stores.forEach(store => {
            const marker = L.marker(store.coordinates, { icon: greenIcon }).addTo(map);
            
            // å¼¹å‡ºçª—å£å†…å®¹
            const popupContent = `
                <div class="store-popup">
                    <h3>${store.name}</h3>
                    <p><strong>åœ°å€ï¼š</strong>${store.address}</p>
                    <p><strong>ç”µè¯ï¼š</strong><span class="phone">${store.phone}</span></p>
                    <p><strong>è¥ä¸šæ—¶é—´ï¼š</strong>${store.businessHours}</p>
                    <p><strong>æ‰€å±åŒºåŸŸï¼š</strong>${store.district}</p>
                </div>
            `;
            
            marker.bindPopup(popupContent);
        });

        // æ ¹æ®åŒºåŸŸåˆ†ç»„
        const districtGroups = {};
        stores.forEach(store => {
            if (!districtGroups[store.district]) {
                districtGroups[store.district] = [];
            }
            districtGroups[store.district].push(store.coordinates);
        });

        // é€‚åº”æ‰€æœ‰æ ‡è®°
        const allCoordinates = stores.map(store => store.coordinates);
        if (allCoordinates.length > 0) {
            const bounds = L.latLngBounds(allCoordinates);
            map.fitBounds(bounds, { padding: [50, 50] });
        }

        // ç›‘å¬çˆ¶çª—å£æ¶ˆæ¯
        window.addEventListener('message', (event) => {
            if (event.data.type === 'filterDistrict') {
                const district = event.data.district;
                if (district === 'all') {
                    const bounds = L.latLngBounds(allCoordinates);
                    map.fitBounds(bounds, { padding: [50, 50] });
                } else if (districtGroups[district]) {
                    const bounds = L.latLngBounds(districtGroups[district]);
                    map.fitBounds(bounds, { padding: [50, 50] });
                }
            }
        });
    </script>
</body>
</html>